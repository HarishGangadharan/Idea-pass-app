"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.formTriggerReducers = void 0;

var _redux = require("redux");

var _constants = _interopRequireDefault(require("../actions/formTrigger/constants"));

var _application = require("../constants/application.properties");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

var currentFormTriggerInitialState = {
  data: {
    actions: [],
    description: '',
    form: '',
    is_active: true,
    is_async: false,
    name: '',
    on_create: false,
    on_update: false,
    qualification: {},
    sequence: '1'
  },
  isLoading: false
};
var listInitialState = {
  data: [],
  isLoading: false,
  limit: _application.AppProperties.TABLE_PROPS.LIMIT,
  total: 0
};
var sourceFieldInitialState = {
  data: [],
  isLoading: false
};
var targetFieldInitialState = {
  data: [],
  isLoading: false
};

var sourceFormFieldsReducer = function sourceFormFieldsReducer() {
  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : sourceFieldInitialState;
  var action = arguments.length > 1 ? arguments[1] : undefined;

  switch (action.type) {
    case _constants.default.FETCH_SOURCE_FORM_FIELDS_REQUEST:
      return _objectSpread({}, state, {
        isLoading: true
      });

    case _constants.default.FETCH_SOURCE_FORM_FIELDS_SUCCESS:
      return _objectSpread({}, state, {
        data: action.data.map(function (source) {
          return {
            label: source,
            value: source
          };
        }),
        isLoading: false
      });

    case _constants.default.FETCH_SOURCE_FORM_FIELDS_FAILURE:
      return _objectSpread({}, state, {
        isLoading: false
      });

    default:
      return state;
  }
};

var targetFormFieldsReducer = function targetFormFieldsReducer() {
  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : targetFieldInitialState;
  var action = arguments.length > 1 ? arguments[1] : undefined;

  switch (action.type) {
    case _constants.default.FETCH_TARGET_FORM_FIELDS_REQUEST:
      return _objectSpread({}, state, {
        isLoading: true
      });

    case _constants.default.FETCH_TARGET_FORM_FIELDS_SUCCESS:
      return _objectSpread({}, state, {
        data: action.data.map(function (source) {
          return {
            label: source,
            value: source
          };
        }),
        isLoading: false
      });

    case _constants.default.FETCH_TARGET_FORM_FIELDS_FAILURE:
      return _objectSpread({}, state, {
        isLoading: false
      });

    default:
      return state;
  }
};

var formTriggerReducer = function formTriggerReducer() {
  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : currentFormTriggerInitialState;
  var action = arguments.length > 1 ? arguments[1] : undefined;

  switch (action.type) {
    case _constants.default.CREATE_FORM_TRIGGER_REQUEST:
      return _objectSpread({}, state, {
        isLoading: true
      });

    case _constants.default.CREATE_FORM_TRIGGER_SUCCESS:
      return _objectSpread({}, state, {
        formSchema: action.payload,
        isLoading: false
      });

    case _constants.default.CREATE_FORM_TRIGGER_FAILURE:
      return _objectSpread({}, state, {
        isLoading: false
      });

    case _constants.default.FETCH_FORM_TRIGGER_REQUEST:
      return _objectSpread({}, state, {
        isLoading: true
      });

    case _constants.default.FETCH_FORM_TRIGGER_SUCCESS:
      return _objectSpread({}, state, {
        data: _objectSpread({}, action.data),
        isLoading: false
      });

    case _constants.default.FETCH_FORM_TRIGGER_FAILURE:
      return _objectSpread({}, state, {
        isLoading: false
      });

    case _constants.default.SAVE_FORM_TRIGGER_REQUEST:
      return _objectSpread({}, state, {
        isLoading: true
      });

    case _constants.default.SAVE_FORM_TRIGGER_SUCCESS:
      return _objectSpread({}, state, currentFormTriggerInitialState);

    case _constants.default.SAVE_FORM_TRIGGER_FAILURE:
      return _objectSpread({}, state, {
        isLoading: false
      });

    case _constants.default.UPDATE_FORM_TRIGGER_STATE:
      return _objectSpread({}, state, {
        data: action.data ? _objectSpread({}, action.data) : currentFormTriggerInitialState.data,
        isLoading: false
      });

    case _constants.default.CLEAR_FORM_TRIGGER_DATA:
      return {
        data: _objectSpread({}, currentFormTriggerInitialState.data, {
          actions: []
        })
      };

    default:
      return state;
  }
};

var formTriggerListReducer = function formTriggerListReducer() {
  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : listInitialState;
  var action = arguments.length > 1 ? arguments[1] : undefined;

  switch (action.type) {
    case _constants.default.FETCH_FORM_TRIGGER_LIST_REQUEST:
      return _objectSpread({}, state, {
        isLoading: false
      });

    case _constants.default.FETCH_FORM_TRIGGER_LIST_FAILURE:
      return _objectSpread({}, state, {
        isLoading: false
      });

    case _constants.default.FETCH_FORM_TRIGGER_LIST_SUCCESS:
      return _objectSpread({}, state, {
        data: action.data.data,
        isLoading: false,
        total: action.data.total
      });

    default:
      return state;
  }
};

var formTriggerReducers = (0, _redux.combineReducers)({
  list: formTriggerListReducer,
  sourceFormFields: sourceFormFieldsReducer,
  targetFormFields: targetFormFieldsReducer,
  trigger: formTriggerReducer
});
exports.formTriggerReducers = formTriggerReducers;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9yZWR1Y2Vycy9mb3JtVHJpZ2dlci50cyJdLCJuYW1lcyI6WyJjdXJyZW50Rm9ybVRyaWdnZXJJbml0aWFsU3RhdGUiLCJkYXRhIiwiYWN0aW9ucyIsImRlc2NyaXB0aW9uIiwiZm9ybSIsImlzX2FjdGl2ZSIsImlzX2FzeW5jIiwibmFtZSIsIm9uX2NyZWF0ZSIsIm9uX3VwZGF0ZSIsInF1YWxpZmljYXRpb24iLCJzZXF1ZW5jZSIsImlzTG9hZGluZyIsImxpc3RJbml0aWFsU3RhdGUiLCJsaW1pdCIsIkFwcFByb3BlcnRpZXMiLCJUQUJMRV9QUk9QUyIsIkxJTUlUIiwidG90YWwiLCJzb3VyY2VGaWVsZEluaXRpYWxTdGF0ZSIsInRhcmdldEZpZWxkSW5pdGlhbFN0YXRlIiwic291cmNlRm9ybUZpZWxkc1JlZHVjZXIiLCJzdGF0ZSIsImFjdGlvbiIsInR5cGUiLCJGb3JtVHJpZ2dlckNvbnN0YW50cyIsIkZFVENIX1NPVVJDRV9GT1JNX0ZJRUxEU19SRVFVRVNUIiwiRkVUQ0hfU09VUkNFX0ZPUk1fRklFTERTX1NVQ0NFU1MiLCJtYXAiLCJzb3VyY2UiLCJsYWJlbCIsInZhbHVlIiwiRkVUQ0hfU09VUkNFX0ZPUk1fRklFTERTX0ZBSUxVUkUiLCJ0YXJnZXRGb3JtRmllbGRzUmVkdWNlciIsIkZFVENIX1RBUkdFVF9GT1JNX0ZJRUxEU19SRVFVRVNUIiwiRkVUQ0hfVEFSR0VUX0ZPUk1fRklFTERTX1NVQ0NFU1MiLCJGRVRDSF9UQVJHRVRfRk9STV9GSUVMRFNfRkFJTFVSRSIsImZvcm1UcmlnZ2VyUmVkdWNlciIsIkNSRUFURV9GT1JNX1RSSUdHRVJfUkVRVUVTVCIsIkNSRUFURV9GT1JNX1RSSUdHRVJfU1VDQ0VTUyIsImZvcm1TY2hlbWEiLCJwYXlsb2FkIiwiQ1JFQVRFX0ZPUk1fVFJJR0dFUl9GQUlMVVJFIiwiRkVUQ0hfRk9STV9UUklHR0VSX1JFUVVFU1QiLCJGRVRDSF9GT1JNX1RSSUdHRVJfU1VDQ0VTUyIsIkZFVENIX0ZPUk1fVFJJR0dFUl9GQUlMVVJFIiwiU0FWRV9GT1JNX1RSSUdHRVJfUkVRVUVTVCIsIlNBVkVfRk9STV9UUklHR0VSX1NVQ0NFU1MiLCJTQVZFX0ZPUk1fVFJJR0dFUl9GQUlMVVJFIiwiVVBEQVRFX0ZPUk1fVFJJR0dFUl9TVEFURSIsIkNMRUFSX0ZPUk1fVFJJR0dFUl9EQVRBIiwiZm9ybVRyaWdnZXJMaXN0UmVkdWNlciIsIkZFVENIX0ZPUk1fVFJJR0dFUl9MSVNUX1JFUVVFU1QiLCJGRVRDSF9GT1JNX1RSSUdHRVJfTElTVF9GQUlMVVJFIiwiRkVUQ0hfRk9STV9UUklHR0VSX0xJU1RfU1VDQ0VTUyIsImZvcm1UcmlnZ2VyUmVkdWNlcnMiLCJsaXN0Iiwic291cmNlRm9ybUZpZWxkcyIsInRhcmdldEZvcm1GaWVsZHMiLCJ0cmlnZ2VyIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBRUE7O0FBQ0E7Ozs7Ozs7O0FBaURBLElBQU1BLDhCQUE4QixHQUFHO0FBQ3JDQyxFQUFBQSxJQUFJLEVBQUU7QUFDSkMsSUFBQUEsT0FBTyxFQUFFLEVBREw7QUFFSkMsSUFBQUEsV0FBVyxFQUFFLEVBRlQ7QUFHSkMsSUFBQUEsSUFBSSxFQUFFLEVBSEY7QUFJSkMsSUFBQUEsU0FBUyxFQUFFLElBSlA7QUFLSkMsSUFBQUEsUUFBUSxFQUFFLEtBTE47QUFNSkMsSUFBQUEsSUFBSSxFQUFFLEVBTkY7QUFPSkMsSUFBQUEsU0FBUyxFQUFFLEtBUFA7QUFRSkMsSUFBQUEsU0FBUyxFQUFFLEtBUlA7QUFTSkMsSUFBQUEsYUFBYSxFQUFFLEVBVFg7QUFVSkMsSUFBQUEsUUFBUSxFQUFFO0FBVk4sR0FEK0I7QUFhckNDLEVBQUFBLFNBQVMsRUFBRTtBQWIwQixDQUF2QztBQWdCQSxJQUFNQyxnQkFBZ0IsR0FBRztBQUN2QlosRUFBQUEsSUFBSSxFQUFFLEVBRGlCO0FBRXZCVyxFQUFBQSxTQUFTLEVBQUUsS0FGWTtBQUd2QkUsRUFBQUEsS0FBSyxFQUFFQywyQkFBY0MsV0FBZCxDQUEwQkMsS0FIVjtBQUl2QkMs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QUFDRSwrQkFDSy9CLEtBREw7QUFFRVYsUUFBQUEsU0FBUyxFQUFFO0FBRmI7O0FBSUYsU0FBS2EsbUJBQXFCNkIsK0JBQTFCO0FBQ0UsK0JBQ0toQyxLQURMO0FBRUVyQixRQUFBQSxJQUFJLEVBQUVzQixNQUFNLENBQUN0QixJQUFQLENBQVlBLElBRnBCO0FBR0VXLFFBQUFBLFNBQVMsRUFBRSxLQUhiO0FBSUVNLFFBQUFBLEtBQUssRUFBRUssTUFBTSxDQUFDdEIsSUFBUCxDQUFZaUI7QUFKckI7O0FBTUY7QUFDRSxhQUFPSSxLQUFQO0FBbkJKO0FBcUJELENBdEJEOztBQXdCTyxJQUFNaUMsbUJBQW1CLEdBQUcsNEJBQWdCO0FBQ2pEQyxFQUFBQSxJQUFJLEVBQUVMLHNCQUQyQztBQUVqRE0sRUFBQUEsZ0JBQWdCLEVBQUVwQyx1QkFGK0I7QUFHakRxQyxFQUFBQSxnQkFBZ0IsRUFBRXpCLHVCQUgrQjtBQUlqRDBCLEVBQUFBLE9BQU8sRUFBRXRCO0FBSndDLENBQWhCLENBQTVCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY29tYmluZVJlZHVjZXJzIH0gZnJvbSAncmVkdXgnO1xuaW1wb3J0IHsgSUFjdGlvblByb3BzIH0gZnJvbSAnLic7XG5pbXBvcnQgRm9ybVRyaWdnZXJDb25zdGFudHMgZnJvbSAnLi4vYWN0aW9ucy9mb3JtVHJpZ2dlci9jb25zdGFudHMnO1xuaW1wb3J0IHsgQXBwUHJvcGVydGllcyB9IGZyb20gJy4uL2NvbnN0YW50cy9hcHBsaWNhdGlvbi5wcm9wZXJ0aWVzJztcblxuZXhwb3J0IGludGVyZmFjZSBJVHJpZ2dlckFjdGlvbiB7XG4gIGZpZWxkX21hcHBpbmc/OiBhbnk7XG4gIGZvcm0/OiBzdHJpbmc7XG4gIGlzQmVmb3JlPzogYm9vbGVhbjtcbiAgbWF0Y2hpbmdfcXVhbGlmaWNhdGlvbj86IGFueTtcbiAgc2VxdWVuY2U6IHN0cmluZztcbiAgdHlwZTogc3RyaW5nO1xuICB2YWxpZD86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVRyaWdnZXIge1xuICBfaWQ/OiBzdHJpbmc7XG4gIGFjdGlvbnM6IElUcmlnZ2VyQWN0aW9uW107XG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nO1xuICBmb3JtOiBzdHJpbmc7XG4gIGlzX2FjdGl2ZT86IGJvb2xlYW47XG4gIGlzX2FzeW5jPzogYm9vbGVhbjtcbiAgb25fY3JlYXRlPzogYm9vbGVhbjtcbiAgb25fdXBkYXRlPzogYm9vbGVhbjtcbiAgbmFtZTogc3RyaW5nO1xuICBxdWFsaWZpY2F0aW9uOiBhbnk7XG4gIHNlcXVlbmNlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUZvcm1UcmlnZ2VyIHtcbiAgZGF0YTogSVRyaWdnZXI7XG4gIGlzTG9hZGluZzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJRm9ybVRyaWdnZXJzIHtcbiAgZGF0YTogSUZvcm1UcmlnZ2VyW107XG4gIGlzTG9hZGluZzogYm9vbGVhbjtcbiAgdG90YWw6IG51bWJlcjtcbiAgbGltaXQ6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJRm9ybUZpZWxkcyB7XG4gIFtrZXk6IHN0cmluZ106IGFueTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJRm9ybVRyaWdnZXJSZWR1Y2VyIHtcbiAgdHJpZ2dlcjogSUZvcm1UcmlnZ2VyO1xuICBsaXN0OiBJRm9ybVRyaWdnZXJzO1xuICBzb3VyY2VGb3JtRmllbGRzOiBJRm9ybUZpZWxkcztcbiAgdGFyZ2V0Rm9ybUZpZWxkczogSUZvcm1GaWVsZHM7XG59XG5cbmNvbnN0IGN1cnJlbnRGb3JtVHJpZ2dlckluaXRpYWxTdGF0ZSA9IHtcbiAgZGF0YToge1xuICAgIGFjdGlvbnM6IFtdLFxuICAgIGRlc2NyaXB0aW9uOiAnJyxcbiAgICBmb3JtOiAnJyxcbiAgICBpc19hY3RpdmU6IHRydWUsXG4gICAgaXNfYXN5bmM6IGZhbHNlLFxuICAgIG5hbWU6ICcnLFxuICAgIG9uX2NyZWF0ZTogZmFsc2UsXG4gICAgb25fdXBkYXRlOiBmYWxzZSxcbiAgICBxdWFsaWZpY2F0aW9uOiB7fSxcbiAgICBzZXF1ZW5jZTogJzEnXG4gIH0sXG4gIGlzTG9hZGluZzogZmFsc2Vcbn07XG5cbmNvbnN0IGxpc3RJbml0aWFsU3RhdGUgPSB7XG4gIGRhdGE6IFtdLFxuICBpc0xvYWRpbmc6IGZhbHNlLFxuICBsaW1pdDogQXBwUHJvcGVydGllcy5UQUJMRV9QUk9QUy5MSU1JVCxcbiAgdG90YWw6IDBcbn07XG5cbmNvbnN0IHNvdXJjZUZpZWxkSW5pdGlhbFN0YXRlID0ge1xuICBkYXRhOiBbXSxcbiAgaXNMb2FkaW5nOiBmYWxzZVxufTtcblxuY29uc3QgdGFyZ2V0RmllbGRJbml0aWFsU3RhdGUgPSB7XG4gIGRhdGE6IFtdLFxuICBpc0xvYWRpbmc6IGZhbHNlXG59O1xuXG5jb25zdCBzb3VyY2VGb3JtRmllbGRzUmVkdWNlciA9IChzdGF0ZTogSUZvcm1GaWVsZHMgPSBzb3VyY2VGaWVsZEluaXRpYWxTdGF0ZSwgYWN0aW9uOiBJQWN0aW9uUHJvcHMpID0+IHtcbiAgc3dpdGNoIChhY3Rpb24udHlwZSkge1xuICAgIGNhc2UgRm9ybVRyaWdnZXJDb25zdGFudHMuRkVUQ0hfU09VUkNFX0ZPUk1fRklFTERTX1JFUVVFU1Q6XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgaXNMb2FkaW5nOiB0cnVlXG4gICAgICB9O1xuICAgIGNhc2UgRm9ybVRyaWdnZXJDb25zdGFudHMuRkVUQ0hfU09VUkNFX0ZPUk1fRklFTERTX1NVQ0NFU1M6XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgZGF0YTogYWN0aW9uLmRhdGEubWFwKChzb3VyY2U6IGFueSkgPT4gKHsgbGFiZWw6IHNvdXJjZSwgdmFsdWU6IHNvdXJjZSB9KSksXG4gICAgICAgIGlzTG9hZGluZzogZmFsc2VcbiAgICAgIH07XG4gICAgY2FzZSBGb3JtVHJpZ2dlckNvbnN0YW50cy5GRVRDSF9TT1VSQ0VfRk9STV9GSUVMRFNfRkFJTFVSRTpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnN0YXRlLFxuICAgICAgICBpc0xvYWRpbmc6IGZhbHNlXG4gICAgICB9O1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gc3RhdGU7XG4gIH1cbn07XG5cbmNvbnN0IHRhcmdldEZvcm1GaWVsZHNSZWR1Y2VyID0gKHN0YXRlOiBJRm9ybUZpZWxkcyA9IHRhcmdldEZpZWxkSW5pdGlhbFN0YXRlLCBhY3Rpb246IElBY3Rpb25Qcm9wcykgPT4ge1xuICBzd2l0Y2ggKGFjdGlvbi50eXBlKSB7XG4gICAgY2FzZSBGb3JtVHJpZ2dlckNvbnN0YW50cy5GRVRDSF9UQVJHRVRfRk9STV9GSUVMRFNfUkVRVUVTVDpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnN0YXRlLFxuICAgICAgICBpc0xvYWRpbmc6IHRydWVcbiAgICAgIH07XG4gICAgY2FzZSBGb3JtVHJpZ2dlckNvbnN0YW50cy5GRVRDSF9UQVJHRVRfRk9STV9GSUVMRFNfU1VDQ0VTUzpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnN0YXRlLFxuICAgICAgICBkYXRhOiBhY3Rpb24uZGF0YS5tYXAoKHNvdXJjZTogYW55KSA9PiAoeyBsYWJlbDogc291cmNlLCB2YWx1ZTogc291cmNlIH0pKSxcbiAgICAgICAgaXNMb2FkaW5nOiBmYWxzZVxuICAgICAgfTtcbiAgICBjYXNlIEZvcm1UcmlnZ2VyQ29uc3RhbnRzLkZFVENIX1RBUkdFVF9GT1JNX0ZJRUxEU19GQUlMVVJFOlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgIGlzTG9hZGluZzogZmFsc2VcbiAgICAgIH07XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBzdGF0ZTtcbiAgfVxufTtcblxuY29uc3QgZm9ybVRyaWdnZXJSZWR1Y2VyID0gKHN0YXRlOiBJRm9ybVRyaWdnZXIgPSBjdXJyZW50Rm9ybVRyaWdnZXJJbml0aWFsU3RhdGUsIGFjdGlvbjogSUFjdGlvblByb3BzKSA9PiB7XG4gIHN3aXRjaCAoYWN0aW9uLnR5cGUpIHtcbiAgICBjYXNlIEZvcm1UcmlnZ2VyQ29uc3RhbnRzLkNSRUFURV9GT1JNX1RSSUdHRVJfUkVRVUVTVDpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnN0YXRlLFxuICAgICAgICBpc0xvYWRpbmc6IHRydWVcbiAgICAgIH07XG4gICAgY2FzZSBGb3JtVHJpZ2dlckNvbnN0YW50cy5DUkVBVEVfRk9STV9UUklHR0VSX1NVQ0NFU1M6XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgZm9ybVNjaGVtYTogYWN0aW9uLnBheWxvYWQsXG4gICAgICAgIGlzTG9hZGluZzogZmFsc2VcbiAgICAgIH07XG4gICAgY2FzZSBGb3JtVHJpZ2dlckNvbnN0YW50cy5DUkVBVEVfRk9STV9UUklHR0VSX0ZBSUxVUkU6XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgaXNMb2FkaW5nOiBmYWxzZVxuICAgICAgfTtcbiAgICBjYXNlIEZvcm1UcmlnZ2VyQ29uc3RhbnRzLkZFVENIX0ZPUk1fVFJJR0dFUl9SRVFVRVNUOlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgIGlzTG9hZGluZzogdHJ1ZVxuICAgICAgfTtcbiAgICBjYXNlIEZvcm1UcmlnZ2VyQ29uc3RhbnRzLkZFVENIX0ZPUk1fVFJJR0dFUl9TVUNDRVNTOlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgIGRhdGE6IHsgLi4uYWN0aW9uLmRhdGEgfSxcbiAgICAgICAgaXNMb2FkaW5nOiBmYWxzZVxuICAgICAgfTtcbiAgICBjYXNlIEZvcm1UcmlnZ2VyQ29uc3RhbnRzLkZFVENIX0ZPUk1fVFJJR0dFUl9GQUlMVVJFOlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgIGlzTG9hZGluZzogZmFsc2VcbiAgICAgIH07XG4gICAgY2FzZSBGb3JtVHJpZ2dlckNvbnN0YW50cy5TQVZFX0ZPUk1fVFJJR0dFUl9SRVFVRVNUOlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgIGlzTG9hZGluZzogdHJ1ZVxuICAgICAgfTtcbiAgICBjYXNlIEZvcm1UcmlnZ2VyQ29uc3RhbnRzLlNBVkVfRk9STV9UUklHR0VSX1NVQ0NFU1M6XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgLi4uY3VycmVudEZvcm1UcmlnZ2VySW5pdGlhbFN0YXRlXG4gICAgICB9O1xuICAgIGNhc2UgRm9ybVRyaWdnZXJDb25zdGFudHMuU0FWRV9GT1JNX1RSSUdHRVJfRkFJTFVSRTpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnN0YXRlLFxuICAgICAgICBpc0xvYWRpbmc6IGZhbHNlXG4gICAgICB9O1xuICAgIGNhc2UgRm9ybVRyaWdnZXJDb25zdGFudHMuVVBEQVRFX0ZPUk1fVFJJR0dFUl9TVEFURTpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnN0YXRlLFxuICAgICAgICBkYXRhOiBhY3Rpb24uZGF0YSA/IHsgLi4uYWN0aW9uLmRhdGEgfSA6IGN1cnJlbnRGb3JtVHJpZ2dlckluaXRpYWxTdGF0ZS5kYXRhICxcbiAgICAgICAgaXNMb2FkaW5nOiBmYWxzZVxuICAgICAgfTtcbiAgICBjYXNlIEZvcm1UcmlnZ2VyQ29uc3RhbnRzLkNMRUFSX0ZPUk1fVFJJR0dFUl9EQVRBOlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIC4uLmN1cnJlbnRGb3JtVHJpZ2dlckluaXRpYWxTdGF0ZS5kYXRhLFxuICAgICAgICAgIGFjdGlvbnM6IFtdXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBzdGF0ZTtcbiAgfVxufTtcblxuY29uc3QgZm9ybVRyaWdnZXJMaXN0UmVkdWNlciA9IChzdGF0ZTogSUZvcm1UcmlnZ2VycyA9IGxpc3RJbml0aWFsU3RhdGUsIGFjdGlvbjogSUFjdGlvblByb3BzKSA9PiB7XG4gIHN3aXRjaCAoYWN0aW9uLnR5cGUpIHtcbiAgICBjYXNlIEZvcm1UcmlnZ2VyQ29uc3RhbnRzLkZFVENIX0ZPUk1fVFJJR0dFUl9MSVNUX1JFUVVFU1Q6XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgaXNMb2FkaW5nOiBmYWxzZVxuICAgICAgfTtcbiAgICBjYXNlIEZvcm1UcmlnZ2VyQ29uc3RhbnRzLkZFVENIX0ZPUk1fVFJJR0dFUl9MSVNUX0ZBSUxVUkU6XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgaXNMb2FkaW5nOiBmYWxzZVxuICAgICAgfTtcbiAgICBjYXNlIEZvcm1UcmlnZ2VyQ29uc3RhbnRzLkZFVENIX0ZPUk1fVFJJR0dFUl9MSVNUX1NVQ0NFU1M6XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgZGF0YTogYWN0aW9uLmRhdGEuZGF0YSxcbiAgICAgICAgaXNMb2FkaW5nOiBmYWxzZSxcbiAgICAgICAgdG90YWw6IGFjdGlvbi5kYXRhLnRvdGFsXG4gICAgICB9O1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gc3RhdGU7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBmb3JtVHJpZ2dlclJlZHVjZXJzID0gY29tYmluZVJlZHVjZXJzKHtcbiAgbGlzdDogZm9ybVRyaWdnZXJMaXN0UmVkdWNlcixcbiAgc291cmNlRm9ybUZpZWxkczogc291cmNlRm9ybUZpZWxkc1JlZHVjZXIsXG4gIHRhcmdldEZvcm1GaWVsZHM6IHRhcmdldEZvcm1GaWVsZHNSZWR1Y2VyLFxuICB0cmlnZ2VyOiBmb3JtVHJpZ2dlclJlZHVjZXJcbn0pO1xuIl19